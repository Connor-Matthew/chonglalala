# 存储器

# 0 前言

今天进入到了存储器章节！！这一章就和绪论部分有了联系，在绪论中我们介绍了主存，还有外部存储器，都是用来存储数据的，这一章节，就来进一步的探索！！



# 1 存储器类型

## RAM和ROM

RAM（Random Access Memory）随机存取存储器，基本上可以认为是主存，也就是内存条！！

ROM只是很小的一部分，记录一些bios信息之类的。

二者区别在于，断电后RAM所有数据丢失，而ROM不受影响。

> 断电后失去数据的，叫**易失性RAM**

好了，我们现在知道了，主存也就是内存条，基本是由RAM组成的。

接下来，再介绍一下两种RAM的类型。

## DRAM和SRAM

其中D：dynamic，代表动态随机存取；S：ststic，代表静态随机存取。

DRAM是动态的，意味着其中存储的内容需要周期性的更新。

SRAM是静态的，意味着存储的东西，只要通电就可以一直保持。

### 二者的区别

1.  dram比sram的成本低，**一般内存条采用dram，cache采用sram。**
2. sram的mos管多，功耗大，集成度低；dram的mos管少，功耗小，集成度高
3. dram由于mos管栅极会缓慢放电，所以需要**重新充电(刷新**，才能继续保存信息



# 2 内部构造

## 基本概念

**地址引脚个数：**取决于DRAM的最大存储容量。

>这是啥意思呢？举个例子来说，某DRAM的容量是1kb，也就是2的10次方，需要10个引脚才可以。但是DRAM用了极其先进的技术，可以引脚减半，于是乎，地址引脚线个数是5！！
>
>1mb呢，就是2的20次方，因此需要20根引脚，SRAM要20根，DRAM用10根。

**地址线位数：**CPU自身定义好的

**数据线根数：**多少位就是多少根，比如32k*16位，就是16根数据线

DRAM的刷新：根据行的数量进行刷新

## SRAM

////图片位置////

其实有了绪论的基础，这部分就好理解啦！！

当CPU想要存取数据时，IR会将指令的地址码放到MAR，MAR通过**地址线（主线的一部分）**传送到SRAM中。

SRAM中先是**地址寄存器**接收地址信息，然后交给**地址译码器**，随后到记忆单元寻找**小柜子（也就是字节块）**

至于是写入，还是读取呢？cpu会发出读写控制信号，通过控制线传送给SRAM中的**读写控制电路**



## DRAM

这里将要介绍几代dram的内部构造，让我们一起探索吧！！

首先是第一代！



### 第一代DRAM

## 读写周期和总线事务

之前我们介绍了，DRAM的基本结构，并且粗略的提到过cpu通过MDR和MAR获取数据，现在来更加详细的介绍一下！！！

我们在之前提到过总线这个概念，cpu可以通过总线与DRAM交换数据，而这一动作，就称之为**总线事务**！！

>CPU 想要访问地址 0010H 中的数据，CPU 跟总线控制器申请总线控制权，总线控制器将总线控制权给到 CPU，CPU 将地址送进 MAR，并经过总线送到DRAM。DRAM 收到地址后准备数据，数据准备完毕后将数据发送到 MDR。这个过程叫做总线事务。



## DRAM刷新

我们之前提到过，DRAM存储的数据，需要定时充电，否则会因为缓慢的放电而消失。

**给一行存储单元充电，就叫做刷新**

而刷新周期，就是存储周期，比如每行数据每隔2ms刷新一次，2ms就是刷新周期

现在我们就介绍一下刷新的原理！！

### 刷新计数器

**刷新计数器**自动的生成地址，读到行缓存寄存器中，并对改行数据补充电荷。

1. 异步刷新：刷新时间平均分到每一行

   ![image-20230626103638441](https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230626103638441.png)



### 刷新的优先级问题

刷新优于访存！！（刷新就是读操作）





## 存储器扩展

1. 位扩展
2. 字扩展





## 高速缓冲存储器 Cache

cache有什么作用呢？就是一个缓冲区，用来解决cpu与内存条之间速度鸿沟的！

### 主存块

cpu想要获取数据，先去cache中，如果没有的话，再去内存中获取。

这时候我们遇到一个问题！！每次是交换多少数据呢？一个字节块么？

显然不是，这样效率太低了！每次交换一个**主存块**

>主存块就是计算机中连续的字节块，4个或8个

### 映射方式

日后补，看不下去了！！

