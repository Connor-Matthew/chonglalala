# 第一章 计算机系统概述

# 0 前言

这一章其实很基础，是一些基本概念的介绍，只需要了解少量的知识点即可。

比如五个基本的组成部分，它们的大概功能，所处的位置等。

除此之外，就是对CPU的组成和运行逻辑进行简单的了解。

# 一 冯诺依曼体系结构

冯诺依曼可以算是祖师爷了。

而他思想的精髓：存储程序！！！这奠定了现代计算机的基本结构！！

>存储程序：将编好的程序和数据，先放入主存，而后才能执行，并且是被计算机自动的逐条运行。

这一部分介绍了计算机的五大组成部分

1. 运算器 控制器
2. 存储器
3. 输入 输出设备

## cpu的构成和运行逻辑

这部分我想倒着介绍，感觉逻辑上会更通顺一些。

### 1 运行逻辑

CPU其实主要做的工作就是

1. 接收数据
2. 对数据进行加工处理
3. 返回处理好的数据

就是这么简单，但是想要实现以上三句话的功能，是非常难的！！

首先就是**接收数据**，我们就会有以下的问题：

如何接收呢？从哪里接收，收到后又存在那里呢？

### 1.1接收数据

由于祖师爷的天才想法，我们的程序和数据都放在**主存**中，而**主存**也是cpu能直接**访问**的存储器。

- 这里的“访问”：代表着访问数据，也就是从内存条中挑出需要的数据。
- 根据什么寻找数据呢？叫做**按地址存取**，言下之意，cpu根据一个地址，去内存中找到对应的指令和数据，这个地址存放在**CPU中的MAR（地址寄存器）部件中**
- **<u>*根据指令周期区分，在取指阶段，取的是指令；执行阶段，取的是数据*</u>**！！！
- 

计算机需要的指令和数据，都必须放到主存（内存条）中，cpu才能使用。但是，我们有大量的数据，内存条全部存下来，显然是不行的，于是我们就有了外存储器（硬盘），帮助储存更多的数据。



**简单来说，cpu从主存获取数据，主存就是内存条，其他更多的数据则存在硬盘中！！**



数据已经到达了内存条，如何传递给cpu呢？

就要通过**总线** 运送到cpu中。

- 总线可以理解为一个高速传送带，负责飞快的运送包裹。我们的数据和指令，被打包成一个个**包裹**（定长的字节块），送往各个地方。

cpu中，要有一个地方，负责和总线碰头，才能顺利的收到数据，**这个地方就是MDR（数据寄存器）。**

这个MDR很重要，因为它接收了数据，下一步就是该如何安排这些数据的去处问题！！

### 1.2 数据的加工处理

这里就要对数据进行处理了，所以用到了控制器的功能

**控制器中PC（程序计数器）**是一个存放当前要**执行指令地址**的部件，根据pc提供的地址，找到当前要执行的指令，随后当前执行的指令，会从**MDR放到控制器中IR（指令寄存器）**中，以供执行和使用

- 指令包括两部分组成：OP操作码和AD地址码

IR会将AD发送给MAR，根据AD到主存中取数据；OP传递给**控制器中CU（控制单元）**，发出微操作指令

涉及到运算的部分，MDR中的一部分操作数和操作码，会放到**通用寄存器组**中，供**ALU**进行处理和使用

### 1.3 返回数据

ALU处理完的数据，放到寄存器组中，然后返回到MDR，MDR利用总线，向外界发送数据的！！

![WechatIMG3](https://picgo-sy.oss-cn-beijing.aliyuncs.com/test/WechatIMG3.jpeg)

### 2 构成

### 2.1 CPU

运算器，控制器

### 2.2运算器 

ALU算术逻辑单元

### 2.3控制器

1. PC
2. IR
3. CU



# 二 性能指标

这里相对来说，就简单很多了，了解基础的概念，记住公式即可。

1. 字长：计算机执行一次整数运算，能处理的二进制数据的位数
2. 主频：就是cpu时钟的频率
3. CPI：执行一条指令的平均时钟周期数量
4. MIPS：每秒执行多少百万条指令
5. MFLOPS：每秒执行多少百万次浮点运算。**（科学计算中，衡量的重要指标**

## 三个公式

### 1 cpu执行时间

$$
CPU执行时间 = CPU时钟周期数 * CPU时钟周期 \\
CPU执行时间 = CPU时钟周期数 * 1/主频 \\
CPU执行时间 = （指令条数 * CPI）* 1/主频
$$

1. 很好理解，一共用了多少时钟周期，然后乘上每个时钟周期，就是总时间
2. 而时钟周期的大小，又是主频的倒数，也就是频率越高，每个周期越小
3. 同理，CPI代表一个指令需要的时钟周期数，乘上指令条数，也就是CPU的时钟周期数

### 2 MIPS 每秒执行多少百万条指令

从名字看，是每秒执行多少指令，很自然的就想到，用指令条数，除以执行时间，便是每秒执行多少，再除一个百万，就是我们要求的MIPS
$$
MIPS = 指令条数  / （执行时间 * 10^6)
$$
如果将上面的第三条公式带入，就有了一个新的公式
$$
MIPS = 主频  / （CPI * 10^6)
$$

单位换算问题：
$$
1GHZ = 1*10^9 \\1ms = 1* 10^{-3} \\1\mu m = 1* 10^{-6} \\1nm = 1* 10^{-9}
$$
​				
​					
​				
​				
​						
​			


​				
​				
​					