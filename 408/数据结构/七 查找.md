# 七 查找

## 一 顺序查找

就是最基本的，一个一个顺序的遍历一遍。

## 二 二分查找

判定树高数：
$$
h=log_2(n+1)
$$


平均查找长度，不超过判定树的高度：
$$
ASL=log_2(n+1)-1
$$
查找时要注意

1. mid的值取得是下整：11/2=5
2. 但是，数组下标是0开始

所以对于【13，18，24，35，47，50，62，83，90，115，134】查找90时，

第一次mid指向50，第二次就指向了90，只需要查找两次。

## 三 分块查找

如果总的数据长度是S，那么

1. 每块的长度为$\sqrt{S}$时，效率最高！
2. 总的查找比较次数由两部分组成：分块时需要的次数+块内查找需要的次数

## 四 二叉排序树

左子树的值 < 根的值 < 右子树的值

> 不能存在重复的元素，会出现插入失败！

插入的时候也很简单，就是比较一下大小，小的往左面放，大的放右侧。

### 查找效率

 好的情况下：等同于平衡二叉树，$log_2(n)$

坏的情况下：单边树，O(n)



## 五 平衡二叉树

左子树和右子树都是平衡二叉树，并且高度差不超过1。

找了神级方法！！高手在民间！！！

方法：

1. 找出插入元素后，不平衡的最小子树
2. 沿着插入元素向上到达树根，然后在该路径上，找到离树根最近的两个节点
3. 将根和这两个节点，重新排序，其他元素按照规则放入即可！

## 六 红黑树

本质是平衡二叉树

性质：

1. 节点只有红和黑两种颜色
2. 根和叶节点必定是黑色的
3. 如果一个节点是红的，那么孩子是黑色的

### 插入 

每次插入的节点都是红色的。

### 修复红黑树

两句话加两个特殊情况

1. 无叔叔，子树旋转，黑色转移

   ![image-20230724203437756](https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230724203437756.png)

2. 有叔叔，子树直接变色（上一层父亲and叔叔同时）

   ![image-20230724203450100](https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230724203450100.png)

特殊情况，如果变色后，和上一层的节点冲突，两种情况：

1. 冲突的节点那一层同色，那么直接改变直接冲突点的颜色

   ![image-20230724203300106](https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230724203300106.png)

2. 冲突的节点那一层异色，就需要重新整理，像调整avl树一样

   ![image-20230724203313143](https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230724203313143.png)

## 七 B树

b树其实可以看作是平衡的avl树的合并。

![image-20230727164313983](https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230727164313983.png)

合并后有极大的好处，就是每次搜索时，能极大的减少比较次数（判定树的高度）举例：

1. 如果是AVL树，从1GB数据中搜索数据

   $h=log(2,10^{9})=30$

2. 如果换成是B树，根据常规，取值关键码m=256

   $h=log(256,10^{9})<=4$

### 7.2 阶次

如果是m阶的B树，那么代表什么呢？

1. 分支数<m
2. 那么关键码（数据）<m-1

我们可以换个角度想，如节点的关键码个数是n，那么最多有n+1个分支。

#### 分支要求

1. 2<=树根的分支要
2. $\left \lceil m/2  \right \rceil $其余的分支数字

所以，阶次m=5的树，可以叫（3,5）树，阶次m=6的树，叫（3,6）树。

### 7.3 加入

如果插入后，超过了数量，那么就会分裂。

取法是将第$\left \lfloor m/2 \right \rfloor $个元素提到上面的节点中，进行分裂。

> 值得注意的是，由于元素是0开始计数，其实相当于直觉上的向上取整

<img src="https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230727170011494.png" alt="image-20230727170011494" style="zoom: 33%;" />

如果蔓延到了树根，那么依旧是按照此法，只不过提出来的元素，直接当做树根，此时树的高度+1。

### 7.4 删除

如果是删除，会导致下溢出。

此时我们需要左顾右盼，如果兄弟节点有多余的，则可以匀过来一个。

如果没有的话，那么我们就需要**粘合剂**进行合并。

在父节点中从左侧取出一个，将下溢节点与兄弟节点合并。

![image-20230727173051657](https://taufik.oss-cn-beijing.aliyuncs.com/img/image-20230727173051657.png)

 ## 八 散列表

